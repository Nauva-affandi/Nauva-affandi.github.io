import{d as S,b as x,z as y,E as T,e as c,h as s,F as h,D as _,v as g,y as b,f as u,t as k}from"./index-Cu1JfqiJ.js";const $=S("todo list",()=>{const r=x([]),o=x(Date.now()),p=x(1e3*60*60*24*30);return{data:r,lastUpdate:o,refresh:()=>{const l=Date.now();if(l-o.value<72e5)try{for(let a=r.value.length-1;a>=0;a--)l-r.value[a].timeStamp>p.value&&r.value.splice(a,1);o.value=Date.now()}catch(a){console.log(a)}else{const a=72e5-(l-o.value),v=Math.ceil(a/(1e3*60));console.log(`Bisa refresh dalam ${v} menit lagi`)}},maxTime:p}},{persist:!0});function w(){const r=BigInt(Date.now()),o=r>>16n&0xffffffffn,p=r&0xffffn,m=crypto.getRandomValues(new Uint8Array(2)),f=crypto.getRandomValues(new Uint8Array(8)),l=o.toString(16).padStart(8,"0"),a=p.toString(16).padStart(4,"0"),v="7"+m[0].toString(16).padStart(2,"0").slice(1),i=(m[1]&63|128).toString(16).padStart(2,"0"),n=Array.from(f.slice(0,2)).map(e=>e.toString(16).padStart(2,"0")).join(""),t=Array.from(f.slice(2)).map(e=>e.toString(16).padStart(2,"0")).join("");return`${l}-${a}-${v}${i}-${n}-${t}`}const j={class:"flex w-full flex-col items-center pt-11"},D={class:"w-4/5 min-w-[320px] max-w-[700px] rounded-xl border p-2"},A={class:"mt-2 w-full"},B=["id"],C={class:"flex w-full flex-row justify-between p-2"},U={class:"ml-2 text-2xl font-bold"},V={class:"mr-2 cursor-pointer text-3xl"},L=["onClick"],E={class:"flex w-full flex-col gap-2 border-t py-3"},F=["id"],I={class:"ml-4 mr-2 cursor-pointer text-xl"},J=["onClick"],M={id:"setting",class:"mt-5 w-4/5 min-w-[320px] max-w-[700px] rounded-xl border p-2"},R={class:"p-4"},z=["onUpdate:modelValue"],N={__name:"App",setup(r){const o=$(),p=y(()=>o.data),m=i=>{for(let n=o.data.length-1;n>=0;n--)if(o.data[n].id===i){o.data.splice(n,1);break}},f=(i,n)=>{for(let t=0;t<o.data.length;t++)if(o.data[t].id===i){const e=o.data[t].item;for(let d=e.length-1;d>=0;d--)if(e[d].id===n){e.splice(d,1);break}break}},l=x(""),a=x([""]),v=()=>{const i=l.value.trim();if(!i)return;const n=o.data.find(t=>t.judul===i);if(n){const t=a.value.map(e=>({id:w(),text:e}));n.item.push(...t)}else o.data.push({id:w(),judul:i,timeStamp:Date.now(),item:a.value.map(t=>({id:w(),text:t}))});l.value="",a.value=[""]};return T(()=>o.data.length,()=>{console.log("data berubah"),o.refresh()}),(i,n)=>(u(),c("div",j,[s("div",D,[n[2]||(n[2]=s("div",{class:"m-3 text-2xl font-bold italic"},[s("h3",null,"todo list")],-1)),s("section",A,[(u(!0),c(h,null,_(p.value,t=>(u(),c("div",{key:t.id,class:"my-5 flex w-full flex-col rounded-md border",id:"topic-"+t.id},[s("div",C,[s("div",null,[s("h3",U,k(t.judul),1)]),s("div",V,[s("span",{onClick:e=>m(t.id)}," × ",8,L)])]),s("div",E,[(u(!0),c(h,null,_(t.item,e=>(u(),c("div",{key:e.id,class:"flex",id:"task-"+e.id},[s("div",I,[s("span",{onClick:d=>f(t.id,e.id)}," × ",8,J)]),s("div",null,k(e.text),1)],8,F))),128))])],8,B))),128))])]),s("section",M,[s("div",R,[g(s("input",{"onUpdate:modelValue":n[0]||(n[0]=t=>l.value=t),placeholder:"Judul",class:"mb-2 w-full border bg-blue-50 p-2 text-black"},null,512),[[b,l.value]]),(u(!0),c(h,null,_(a.value,(t,e)=>(u(),c("div",{key:e,class:"mb-2 flex"},[g(s("input",{"onUpdate:modelValue":d=>a.value[e]=d,placeholder:"Task...",class:"w-full border p-2 text-black"},null,8,z),[[b,a.value[e]]])]))),128)),s("button",{onClick:n[1]||(n[1]=t=>a.value.push("")),class:"mr-2 rounded bg-blue-500 px-4 py-1 text-white"}," + Task "),s("button",{onClick:v,class:"rounded bg-green-500 px-4 py-1 text-white"}," Submit ")])])]))}};export{N as default};
