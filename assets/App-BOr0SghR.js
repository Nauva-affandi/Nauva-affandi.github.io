import{q as J,r as k,s as h,d as K,c as g,F as M,a as e,m as y,v,o as w,_ as T,i as O,b as A,t as b}from"./index-B_abVhzS.js";function d(s){return document.getElementById(s)}function $(s,t=1e3){const o=s.length;for(let n=o-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[s[n],s[i]]=[s[i],s[n]]}for(let n=0;n<t;n++){const i=Math.floor(Math.random()*o),u=Math.floor(Math.random()*o);[s[i],s[u]]=[s[u],s[i]]}for(let n=0;n<o;n++){const i=(n^Math.floor(Math.random()*o))%o;[s[n],s[i]]=[s[i],s[n]]}return s}const j=J("card",()=>{const s=k([{k:"--",h:"--",i:"--"}]),t=k([]),o=k("kosong"),n=k("kosong"),i=h(()=>s.value.length===1?"kosong":s.value.length);return{stack:s,history:t,stackType:o,stackLv:n,card_stack:i,Type:["KOTOBA","KANJI","BUNPOU"]}},{persist:!0}),I={class:"w-36"},L={class:"mt-7 w-36"},S={class:"mt-7 w-36"},C={class:"mt-7 w-36"},E={class:"mt-6"},U=K({__name:"search-select",setup(s){const t=j(),o=k(),n=c=>{const a=c.target;o.value=a.value};async function i(c,a){try{const f=c.toLowerCase(),p=a.toLowerCase();return await(await fetch(`/database/nihongo/${f}/${p}.json`)).json()}catch(f){console.error(f.message)}}async function u(){var c;try{const a=d("parent"),f=`category_select_${(c=o.value)==null?void 0:c.toLowerCase()}`,p=d(f);if(!a||!p)throw new Error("select element not found");const m=a.value,_=p.value,r=await i(m,_);let l;try{l=$(r)}catch(x){console.log(x)}t.stack=l,t.stackType=m,t.stackLv=_,t.history.length=0}catch(a){console.error(a)}}return(c,a)=>(w(),g(M,null,[e("div",I,[e("select",{class:"rounded-xl border border-2 border-gray-900 px-3 py-1 focus:outline-none dark:border-white",onChange:n,id:"parent"},a[0]||(a[0]=[e("option",{value:"undefined",disabled:"",selected:""},"pilih opsi",-1),e("option",{value:"KANJI"},"kanji",-1),e("option",{value:"KOTOBA"},"kotoba",-1),e("option",{value:"BUNPOU"},"bunpou",-1)]),32)]),y(e("div",L,a[1]||(a[1]=[e("select",{class:"rounded-xl border border-2 border-gray-900 px-3 py-1 focus:outline-none dark:border-white",id:"category_select_kanji"},[e("option",{disabled:"",selected:""},"pilih opsi"),e("option",{value:"N5"},"N5"),e("option",{value:"N4"},"N4")],-1)]),512),[[v,o.value==="KANJI"]]),y(e("div",S,a[2]||(a[2]=[e("select",{class:"rounded-xl border border-2 border-gray-900 px-3 py-1 focus:outline-none dark:border-white",id:"category_select_bunpou"},[e("option",{disabled:"",selected:""},"pilih bunpou"),e("option",{value:"N5"},"N5")],-1)]),512),[[v,o.value==="BUNPOU"]]),y(e("div",C,a[3]||(a[3]=[e("select",{class:"rounded-xl border border-2 border-gray-900 px-3 py-1 focus:outline-none dark:border-white",id:"category_select_kotoba"},[e("option",{disabled:"",selected:""},"pilih opsi"),e("option",{value:"MNN-BAB-26"},"minna no nihongo bab 26")],-1)]),512),[[v,o.value==="KOTOBA"]]),y(e("div",E,[e("button",{id:"next_card",class:"rounded-lg border-2 border-white bg-blue-600 px-4 py-2 font-bold text-white hover:bg-blue-700 sm:text-sm",onClick:u}," Search ")],512),[[v,["KOTOBA","BUNPOU","KANJI"].includes(o.value)]])],64))}}),P=T(U,[["__scopeId","data-v-10885f49"]]);function B(s,t=300){s.disabled=!0,setTimeout(()=>{s.disabled=!1},t)}const q={},F={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"};function V(s,t){return w(),g("svg",F,t[0]||(t[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"},null,-1)]))}const z=T(q,[["render",V]]),D=(s,t)=>{if(s.length>1){const o=Math.max(1,Math.floor(s.length*(t/100)));s.splice(o,0,s.shift())}},G=s=>{s.length>1&&(s[0].mistakeData={soft:0,hard:0},s.push(s.shift()))},H=s=>{let t=s[0];if(s.length>1){t.mistakeData||(t.mistakeData={soft:0,hard:0}),t.mistakeData.soft++;let o=Math.max(20,50-t.mistakeData.soft*3);if(t.mistakeData.hard>0)for(let n=1;n<t.mistakeData.hard&&t.mistakeData.hard>1;n++)t.mistakeData.hard-=2,o++;D(s,o)}},Z=s=>{let t=s[0];if(s.length>1){t.mistakeData||(t.mistakeData={soft:0,hard:0}),t.mistakeData.hard++;let o=Math.max(45,75-t.mistakeData.hard*3);if(t.mistakeData.soft>0)for(let n=1;n<t.mistakeData.soft&&t.mistakeData.soft>1;n++)t.mistakeData.soft-=2,o+=10;D(s,o)}},Q={id:"section_card"},R={id:"dev",class:"ml-4 mt-5"},W={id:"search"},X={class:"mt-2"},Y={class:"flex h-12 flex-col justify-between"},tt={id:"container",class:"relative mt-24 flex w-full justify-center"},et={class:"md:w-[75%]"},st={id:"card-content",class:"md:w-sm:w-full text-1xl h-48 rounded-3xl bg-gray-500 p-1 font-bold text-black dark:bg-[#f2f2f2]"},ot={id:"card",class:"perspective-1000 relative h-[184px] w-full duration-700"},nt={class:"transform-style-preserve-3d card_animation absolute inset-0 h-full w-full",id:"card-inner"},at={id:"front",class:"backface-hidden absolute flex h-full w-full items-center justify-center rounded-3xl bg-blue-50"},lt={class:"flex flex-col"},it={class:"flex w-full justify-center"},rt={class:"text-3xl"},ct={class:"flex w-full justify-center"},dt={id:"back",class:"backface-hidden rotate-y-180 absolute top-0 flex h-full w-full items-center justify-center rounded-3xl bg-blue-50"},ut={class:"flex w-full justify-center"},ft={class:"text-3xl"},ht={class:"flex w-full justify-center"},pt={id:"search",class:"m-3 mt-44 rounded-2xl border border-white p-3"},_t=K({__name:"App",setup(s){const t=j(),o=k(!1);O(()=>{const r=d("card");r.addEventListener("click",()=>{r.classList.toggle("rotated")})});const n=h(()=>t.stackType==="KANJI"||t.stackType==="KOTOBA"?t.stack[0].k:"--"),i=h(()=>t.stackType==="KANJI"?"":t.stackType==="KOTOBA"?t.stack[0].h:"--"),u=h(()=>t.stackType==="KANJI"?t.stack[0].h:t.stackType==="KOTOBA"?t.stack[0].i:"--"),c=h(()=>t.stackType==="KANJI"?t.stack[0].i:t.stackType==="KOTOBA"?"":"--"),a=h(()=>t.stackType==="KANJI"||t.stackType==="KOTOBA"?`• jumlah kartu : ${t.card_stack}`:""),f=h(()=>t.stackType==="KANJI"?`Kanji ${t.stackLv}`:t.stackType==="KOTOBA"?`• Kotoba ${t.stackLv}`:"");function p(){const r=Math.min(5+Math.floor(t.stack.length/20),12);t.history.length<r||t.history.pop(),t.history.unshift(JSON.parse(JSON.stringify(t.stack))),d("undo_warn").classList.add("hidden")}function m(){t.history.length>0&&(t.stack=JSON.parse(JSON.stringify(t.history.shift()))),t.history.length===0&&d("undo_warn").classList.remove("hidden")}function _(r,l){B(l),p(),r&&r(t.stack)}return O(()=>{const r=d("next_card"),l=d("lupa_satu"),x=d("lupa_semuanya"),N=d("undo");r.addEventListener("click",()=>{t.Type.includes(t.stackType)&&_(G,r)}),l.addEventListener("click",()=>{t.Type.includes(t.stackType)&&_(H,l)}),x.addEventListener("click",()=>{t.Type.includes(t.stackType)&&_(Z,x)}),N.addEventListener("click",()=>{B(N),m()})}),(r,l)=>(w(),g("main",null,[e("section",Q,[e("div",R,[e("section",W,[e("button",{onClick:l[0]||(l[0]=x=>o.value=!o.value),class:"flex"},[A(z),l[1]||(l[1]=e("span",{class:"ml-1"},"Search",-1))])]),e("section",X,[e("div",Y,[e("p",null,b(a.value),1),e("p",null,b(f.value),1)])])]),e("div",tt,[e("div",et,[e("div",st,[e("div",ot,[e("div",nt,[e("div",at,[e("div",lt,[e("span",it,[e("p",rt,b(n.value),1)]),e("span",ct,[e("p",null,b(i.value),1)])])]),e("div",dt,[e("div",null,[e("span",ut,[e("p",ft,b(u.value),1)]),e("span",ht,[e("p",null,b(c.value),1)])])])])])]),l[2]||(l[2]=e("div",{id:"control_btn",class:"mt-5 flex flex-wrap justify-start gap-y-3"},[e("button",{id:"next_card",class:"mx-2 rounded-lg border-2 border-white bg-blue-600 px-4 py-2 font-bold text-white hover:bg-blue-700 sm:text-sm"}," Next "),e("button",{id:"lupa_satu",class:"mx-2 rounded-lg border-2 border-white bg-blue-600 px-2 font-bold text-white hover:bg-blue-700"}," lupa kanji / hiragana "),e("button",{id:"lupa_semuanya",class:"mx-2 rounded-lg border-2 border-white bg-blue-600 px-2 py-2 font-bold text-white hover:bg-blue-700"}," lupa kanji & hiragana ")],-1))]),l[3]||(l[3]=e("div",{class:"absolute top-80 flex flex-col"},[e("div",{class:"flex w-full justify-center"},[e("p",{id:"undo_warn",class:"mb-2 hidden animate-shake font-bold text-black dark:text-white"}," undo max! ")]),e("button",{id:"undo",class:"mx-2 rounded-lg border-2 border-white bg-red-500 px-6 py-2 font-bold text-white hover:bg-red-700"}," undo ")],-1))])]),y(e("section",pt,[A(P)],512),[[v,o.value]])]))}}),kt=T(_t,[["__scopeId","data-v-cd64de31"]]);export{kt as default};
