import{z as f,m as k,n as C,e as h,h as s,A as m,u as a,t as p,F as v,D as b,r as M,f as g,C as P}from"./index-Cu1JfqiJ.js";const I={class:"flex min-h-screen flex-col items-center justify-center bg-gray-900 p-4 text-white"},B={class:"flex flex-col items-center gap-8 md:flex-row"},G={class:"relative overflow-hidden rounded-lg border-4 border-gray-700 bg-gray-800 shadow-lg"},A={key:0,class:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-black bg-opacity-80 p-4"},$={class:"mb-4 text-xl"},j={key:1,class:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-black bg-opacity-80 p-4"},E={class:"grid grid-cols-10 gap-0"},W={class:"flex flex-col gap-6"},L={class:"rounded-lg bg-gray-800 p-4"},N={class:"text-3xl font-bold text-teal-400"},V={class:"rounded-lg bg-gray-800 p-4"},z={class:"grid h-32 w-32 grid-cols-4 gap-1 rounded bg-gray-900 p-2"},O={class:"rounded-lg bg-gray-800 p-4"},D={class:"mb-4 grid grid-cols-3 gap-2"},H={class:"flex justify-center gap-4"},X={__name:"App",setup(K){class u{constructor(e,t){this.shape=e.map(r=>[...r]),this.color=t}clone(){return new u(this.shape,this.color)}rotate(e){const t=this.shape.length,r=Array(t).fill().map(()=>Array(t).fill(0));if(e==="right")for(let i=0;i<t;i++)for(let o=0;o<t;o++)r[o][t-1-i]=this.shape[i][o];else for(let i=0;i<t;i++)for(let o=0;o<t;o++)r[t-1-o][i]=this.shape[i][o];return this.shape=r,this}}class x{constructor(e,t){this.boardWidth=e,this.boardHeight=t,this.gameState=M({board:[],currentPiece:null,currentPosition:{x:0,y:0},nextPiece:null,score:0,gameOver:!1,gameStarted:!1,isPaused:!1,speed:450}),this.gameInterval=null,this.pieces=this.definePieces(),this.keyMappings={ArrowLeft:()=>this.movePiece(-1,0),ArrowRight:()=>this.movePiece(1,0),ArrowDown:()=>this.movePiece(0,1),ArrowUp:()=>this.rotatePiece("right"),z:()=>this.rotatePiece("left"),x:()=>this.rotatePiece("right")," ":()=>this.dropPiece(),p:()=>this.pauseGame()},this.initBoard(),this.handleKeyPress=this.handleKeyPress.bind(this)}definePieces(){return[{shape:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],color:1},{shape:[[2,0,0],[2,2,2],[0,0,0]],color:2},{shape:[[0,0,3],[3,3,3],[0,0,0]],color:3},{shape:[[4,4],[4,4]],color:4},{shape:[[0,5,5],[5,5,0],[0,0,0]],color:5},{shape:[[0,6,0],[6,6,6],[0,0,0]],color:6},{shape:[[7,7,0],[0,7,7],[0,0,0]],color:7}]}initBoard(){this.gameState.board=Array(this.boardHeight).fill().map(()=>Array(this.boardWidth).fill(0)),this.gameState.score=0,this.gameState.gameOver=!1}getRandomPiece(){const e=Math.floor(Math.random()*this.pieces.length),t=this.pieces[e];return new u(t.shape,t.color)}startGame(){this.initBoard(),this.gameState.gameStarted=!0,this.gameState.isPaused=!1,this.gameState.nextPiece=this.getRandomPiece(),this.spawnNewPiece(),this.setupGameInterval(),window.addEventListener("keydown",this.handleKeyPress)}resetGame(){clearInterval(this.gameInterval),this.startGame()}pauseGame(){this.gameState.isPaused=!this.gameState.isPaused,this.gameState.isPaused?clearInterval(this.gameInterval):this.setupGameInterval()}setupGameInterval(){clearInterval(this.gameInterval),this.gameInterval=setInterval(()=>{this.gameState.isPaused||this.tick()},this.gameState.speed)}spawnNewPiece(){this.gameState.currentPiece=this.gameState.nextPiece,this.gameState.nextPiece=this.getRandomPiece();const e=this.gameState.currentPiece.shape[0].length;this.gameState.currentPosition={x:Math.floor((this.boardWidth-e)/2),y:0},this.isValidPosition(this.gameState.currentPosition.x,this.gameState.currentPosition.y,this.gameState.currentPiece.shape)||(this.gameState.gameOver=!0,clearInterval(this.gameInterval),window.removeEventListener("keydown",this.handleKeyPress))}tick(){if(!this.movePiece(0,1)){this.lockPiece(),this.clearLines(),this.spawnNewPiece();const e=Math.floor(this.gameState.score/1e3);e>0&&e%5===0&&(this.gameState.speed=Math.max(100,this.gameState.speed-50),this.setupGameInterval())}}isValidPosition(e,t,r){for(let i=0;i<r.length;i++)for(let o=0;o<r[i].length;o++)if(r[i][o]!==0){const l=e+o,d=t+i;if(l<0||l>=this.boardWidth||d>=this.boardHeight||d>=0&&this.gameState.board[d][l]!==0)return!1}return!0}movePiece(e,t){const r=this.gameState.currentPosition.x+e,i=this.gameState.currentPosition.y+t;return this.isValidPosition(r,i,this.gameState.currentPiece.shape)?(this.gameState.currentPosition.x=r,this.gameState.currentPosition.y=i,!0):!1}rotatePiece(e){if(!this.gameState.currentPiece)return;const t=this.gameState.currentPiece.clone().rotate(e);if(this.isValidPosition(this.gameState.currentPosition.x,this.gameState.currentPosition.y,t.shape))this.gameState.currentPiece=t;else{const r=[{x:1,y:0},{x:-1,y:0},{x:0,y:-1},{x:2,y:0},{x:-2,y:0}];for(const i of r){const o=this.gameState.currentPosition.x+i.x,l=this.gameState.currentPosition.y+i.y;if(this.isValidPosition(o,l,t.shape)){this.gameState.currentPosition.x=o,this.gameState.currentPosition.y=l,this.gameState.currentPiece=t;break}}}}lockPiece(){this.gameState.currentPiece&&this.gameState.currentPiece.shape.forEach((e,t)=>{e.forEach((r,i)=>{if(r!==0){const o=t+this.gameState.currentPosition.y,l=i+this.gameState.currentPosition.x;o>=0&&o<this.boardHeight&&l>=0&&l<this.boardWidth&&(this.gameState.board[o][l]=r)}})})}clearLines(){let e=0;for(let t=this.boardHeight-1;t>=0;t--)this.gameState.board[t].every(r=>r!==0)&&(this.gameState.board.splice(t,1),this.gameState.board.unshift(Array(this.boardWidth).fill(0)),e++,t++);if(e>0){const t=[0,100,300,500,800];this.gameState.score+=t[e]||800}}dropPiece(){for(;this.movePiece(0,1););this.lockPiece(),this.clearLines(),this.spawnNewPiece(),this.gameState.score+=20}handleKeyPress(e){if(this.gameState.gameOver||!this.gameState.gameStarted)return;const t=this.keyMappings[e.key];t&&(e.preventDefault(),t())}getColor(e){return["gray-900","cyan-500","blue-500","orange-500","yellow-500","green-500","purple-500","red-500"][e]||"gray-900"}cleanup(){clearInterval(this.gameInterval),window.removeEventListener("keydown",this.handleKeyPress)}getBoardWithCurrentPiece(){if(!this.gameState.currentPiece||this.gameState.gameOver)return[...this.gameState.board.flat()];const e=this.gameState.board.map(t=>[...t]);return this.gameState.currentPiece.shape.forEach((t,r)=>{t.forEach((i,o)=>{if(i!==0){const l=r+this.gameState.currentPosition.y,d=o+this.gameState.currentPosition.x;l>=0&&l<this.boardHeight&&d>=0&&d<this.boardWidth&&(e[l][d]=i)}})}),e.flat()}getNextPieceDisplay(){if(!this.gameState.nextPiece)return Array(16).fill(0);const e=Array(16).fill(0);return this.gameState.nextPiece.shape.forEach((r,i)=>{r.forEach((o,l)=>{if(o!==0){const d=i*4+l;d>=0&&d<16&&(e[d]=o)}})}),e}}const n=new x(10,20),c=n.gameState,w=f(()=>n.getBoardWithCurrentPiece()),y=f(()=>n.getNextPieceDisplay());return k(()=>{n.initBoard()}),C(()=>{n.cleanup()}),(S,e)=>(g(),h("div",I,[e[23]||(e[23]=s("h1",{class:"mb-6 text-center text-4xl font-bold tracking-wider text-teal-400"}," TETRIS ",-1)),s("div",B,[s("div",G,[a(c).gameOver?(g(),h("div",A,[e[9]||(e[9]=s("h2",{class:"mb-4 text-4xl font-bold text-red-500"},"Game Over",-1)),s("p",$,"Score: "+p(a(c).score),1),s("button",{onClick:e[0]||(e[0]=t=>a(n).resetGame()),class:"rounded-lg bg-teal-500 px-6 py-3 font-bold transition duration-200 hover:bg-teal-600"}," Mulai Lagi ")])):m("",!0),a(c).gameStarted?m("",!0):(g(),h("div",j,[e[10]||(e[10]=s("h2",{class:"mb-4 text-4xl font-bold text-teal-400"},"Tetris",-1)),e[11]||(e[11]=s("p",{class:"mb-6 text-center text-xl"},"Siap untuk bermain?",-1)),s("button",{onClick:e[1]||(e[1]=t=>a(n).startGame()),class:"rounded-lg bg-teal-500 px-6 py-3 font-bold transition duration-200 hover:bg-teal-600"}," Mulai Game ")])),s("div",E,[(g(!0),h(v,null,b(w.value,(t,r)=>(g(),h("div",{key:r,class:P(["h-6 w-6 border border-gray-700 sm:h-8 sm:w-8",t?`bg-${a(n).getColor(t)}`:"bg-gray-900"])},null,2))),128))])]),s("div",W,[s("div",L,[e[12]||(e[12]=s("p",{class:"mb-1 text-xl font-bold"},"Score:",-1)),s("p",N,p(a(c).score),1)]),s("div",V,[e[13]||(e[13]=s("p",{class:"mb-2 text-xl font-bold"},"Next Piece:",-1)),s("div",z,[(g(!0),h(v,null,b(y.value,(t,r)=>(g(),h("div",{key:`next-${r}`,class:P(["h-6 w-6 rounded",t?`bg-${a(n).getColor(t)}`:"bg-transparent"])},null,2))),128))])]),s("div",O,[e[22]||(e[22]=s("p",{class:"mb-2 text-xl font-bold"},"Controls:",-1)),s("div",D,[e[18]||(e[18]=s("div",null,null,-1)),s("button",{onClick:e[2]||(e[2]=t=>a(n).movePiece(0,-1)),class:"rounded bg-gray-700 p-2 hover:bg-gray-600"},e[14]||(e[14]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mx-auto h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"})],-1)])),e[19]||(e[19]=s("div",null,null,-1)),s("button",{onClick:e[3]||(e[3]=t=>a(n).movePiece(-1,0)),class:"rounded bg-gray-700 p-2 hover:bg-gray-600"},e[15]||(e[15]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mx-auto h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),s("button",{onClick:e[4]||(e[4]=t=>a(n).dropPiece()),class:"rounded bg-gray-700 p-2 hover:bg-gray-600"},e[16]||(e[16]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mx-auto h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),s("button",{onClick:e[5]||(e[5]=t=>a(n).movePiece(1,0)),class:"rounded bg-gray-700 p-2 hover:bg-gray-600"},e[17]||(e[17]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mx-auto h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),s("div",H,[s("button",{onClick:e[6]||(e[6]=t=>a(n).rotatePiece("left")),class:"rounded-lg bg-teal-600 px-4 py-2 hover:bg-teal-700"},e[20]||(e[20]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])),s("button",{onClick:e[7]||(e[7]=t=>a(n).rotatePiece("right")),class:"rounded-lg bg-teal-600 px-4 py-2 hover:bg-teal-700"},e[21]||(e[21]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c1.657 0 3 .895 3 2s-1.343 2-3 2-3 .895-3 2 1.343 2 3 2m0-8c-1.11 0-2.08.402-2.599 1M12 8V7m0 1v8m0 0v1m0-1c1.11 0 2.08-.402 2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]))])]),a(c).gameStarted&&!a(c).gameOver?(g(),h("button",{key:0,onClick:e[8]||(e[8]=t=>a(n).pauseGame()),class:"rounded-lg bg-yellow-600 px-4 py-2 font-bold hover:bg-yellow-700"},p(a(c).isPaused?"Lanjutkan":"Pause"),1)):m("",!0)])])]))}};export{X as default};
